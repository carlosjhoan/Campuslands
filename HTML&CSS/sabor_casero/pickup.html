<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sabor Casero</title>
    <link rel="stylesheet" href="pickup_style.css">
    

</head>
<body>


    <nav>
        <div class="grid nav">
            <div class="logo">
                <a href="https://carlosjhoan.github.io/Campuslands/HTML&CSS/sabor_casero/inicio.html"><img src="../img_proyecto/logo_tranparent.png" alt=""></a>
            </div>

            <div class="buscar">
                <form action = "https://www.google.com/search" method = "get">
                    <label for="search"><img src="../img_proyecto/search_logo.png" alt="search"></label>
                    <input type="search" name = "q" id = "search" placeholder="Buscar">
            </form>
            </div>

            <div id = "buy_car">
                <div id = "img_car">
                    <img src="../img_proyecto/buy_car.png" alt="Buy_car">
                </div>
                <div id = "mi_pedido">
                    <input type="text"  readonly id = "value_order">
                    <button id = "button_mi_pedido" onclick="dropdown_order ()">Ver pedido</button>
                </div>
                
            </div>
            
            <div class="barr_nav">
                <div class="menu"><button><img src="../img_proyecto/menu_logo.png" alt=""></button></div>
                <ul>
                    <li class = "menu_dia"><a href="https://carlosjhoan.github.io/Campuslands/HTML&CSS/sabor_casero/menu.html">Menú</a></li>
                    <li><a href="https://carlosjhoan.github.io/Campuslands/HTML&CSS/sabor_casero/nosotros.html">Nosotros</a></li>
                    <li><a href="https://carlosjhoan.github.io/Campuslands/HTML&CSS/sabor_casero/contacto.html">Contáctanos</a></li>
                </ul>

            </div>
        </div>
    </nav>

    <main>
        
        <div class= "each gallina">
            <p class = "precio">$14.000</p>
            <img src="../img_proyecto/gallina.PNG" alt="" class = "foto">
            <p class = "dish_name">Sancocho de gallina</p>
            <div class= "hr"></div>
            <p class = "q_trae"><em>Sopa de sancocho, cuarto de gallina, yuca al vapor, arroz, ensalada con aguacate, limonada</em></p>
            <div class="button_i_want" id = "i_want_gallina">
                <button class = "i_want" id = "but_gallina" onclick = "order_buy('i_want_gallina', 'img_check_gallina', 0)">Yo quiero!</button>
                <img src="../img_proyecto/check_order.png" alt="" id = "img_check_gallina">
            </div>
            
        </div>
        <div class="each costilla">
            <p class = "precio">$14.000</p>
            <img src="../img_proyecto/costilla.PNG" alt="" class = "foto">
            <p class = "dish_name">Sancocho de costilla</p>
            <div class= "hr"></div>
            <p class = "q_trae"><em>Sopa de sancocho, costilla guisada, yuca al vapor, arroz, ensalada con aguacate, limonada</em></p>
            <div class="button_i_want" id = "i_want_costilla">
                <button class = "i_want" id = "but_costilla" onclick="order_buy('i_want_costilla', 'img_check_costilla', 1)">Yo quiero!</button>
                <img src="../img_proyecto/check_order.png" alt="" id = "img_check_costilla">
            </div>
            
        </div>
        <div class="each cola">
            <p class = "precio">$14.000</p>
            <img src="../img_proyecto/cola.PNG" alt="" class = "foto">
            <p class = "dish_name">Sancocho de cola</p>
            <div class= "hr"></div>
            <p class = "q_trae"><em>Sopa de sancocho, cola de res guisada, yuca al vapor, arroz, ensalada con aguacate, limonada</em></p>
            <div class="button_i_want" id = "i_want_cola">
                <button class = "i_want" id = "but_cola" onclick="order_buy('i_want_cola', 'img_check_cola', 2)">Yo quiero!</button>
                <img src="../img_proyecto/check_order.png" alt="" id = "img_check_cola">
            </div> 
        </div>
        
        <div class="each sobrebarriga">
            <p class = "precio">$14.000</p>
            <img src="../img_proyecto/sobrebarriga.PNG" alt="" class = "foto">
            <p class = "dish_name">Sobrebarriga (160gr)</p>
            <div class= "hr"></div>
            <p class = "q_trae"><em>Sopa de fideos, yuca al vapor, papa a la francesa, arroz, ensalada con aguacate, limonada</em></p>
            <div class="button_i_want" id = "i_want_sobre">
                <button class = "i_want" id = "but_sobre" onclick="order_buy('i_want_sobre', 'img_check_sobre', 3)">Yo quiero!</button>
                <img src="../img_proyecto/check_order.png" alt="" id = "img_check_sobre">
            </div>  
        </div>

        <div class="each chatas">
            <p class = "precio">$14.000</p>
            <img src="../img_proyecto/chatas.PNG" alt="" class = "foto">
            <p class = "dish_name">Chatas (160gr)</p>
            <div class= "hr"></div>
            <p class = "q_trae"><em>Sopa de fideos, yuca al vapor, papa a la francesa, arroz, ensalada con aguacate, limonada</em></p>
            <div class = "button_i_want" id = "i_want_chatas">
                <button class = "i_want" id = "but_chatas" onclick="order_buy('i_want_chatas', 'img_check_chatas', 4)">Yo quiero!</button>
                <img src="../img_proyecto/check_order.png" alt="" id = "img_check_chatas">
            </div>
        </div>

        <div class="each oreada">
            <p class = "precio">$14.000</p>
            <img src="../img_proyecto/oreada.PNG" alt="" class = "foto">
            <p class = "dish_name">Oreada (160gr)</p>
            <div class= "hr"></div>
            <p class = "q_trae"><em>Sopa de fideos, yuca al vapor, papa a la francesa, arroz, ensalada con aguacate, limonada</em></p>
            <div class="button_i_want" id = "i_want_ore">
                <button class = "i_want" id = "but_oreada" onclick="order_buy('i_want_ore', 'img_check_ore', 5)">Yo quiero!</button>
                <img src="../img_proyecto/check_order.png" alt="" id = "img_check_ore">
            </div>
        </div>

        
        
        <div class="grid legal">
            <div class="logo_legal"><img src="../img_proyecto/logo_tranparent_white.png" alt=""></div>
            <div class="terms">
                <ul>
                    <li><a href="https://www.restaurantemuy.com/terminosycondiciones" target="_blank">Términos y condiciones</a></li>
                    <li><a href="https://www.restaurantemuy.com/politicadeprivacidad" target="_blank">Política de privacidad</a></li>
                </ul>
            </div>
            <div class="social_media">
                <a href = "https://www.facebook.com/lalitoy/" target = "_blank"><img src = "../img_proyecto/facebook_logo.png" alt = "facebook">
                    <a href = "https://www.instagram.com/carlos.aguilar0512/?hl=es-la" target = "_blank"><img src = "../img_proyecto/instagram_logo.png" alt = "instagram"></a>

            </div>

        </div>
        <div class="grid footer">
            <hr>
            <p>@LaliToy. All right reserved.</p>
        </div>
    </main>

    <div class="wpp">
        <p>Escríbenos</p>
        <a href = "https://walink.co/4729de" target = "_blank"><img src = "https://github.com/carlosjhoan/Campuslands/blob/main/HTML&CSS/img/wpp_logo.png?raw=true" alt = "whatsapp"></a>
  
    </div>

    <div class="buttons_deliv_pickup">
        <div class="botton_delivery"><button id = "b_delivery"><img src="../img_proyecto/food-delivery.png" alt=""><a href="https://carlosjhoan.github.io/Campuslands/HTML&CSS/sabor_casero/delivery.html">Porfa me lo traen</a><img src="../img_proyecto/food-delivery_2.png" alt=""></button></div>

    </div>

    <div class = "lista_pedido">
        <table id = "table_order">
            
        </table>
        <button id = "confirmo_button" onclick="confirm_order()"><img src="../img_proyecto/order_list.png" alt="" id = "order_list">Confirmo!<img src="../img_proyecto/check_icon.png" alt="" id = "check"></button>
        <button id = "ok_button" onclick="collapse_order()"><img src="../img_proyecto/close_order.png" alt=""></button>
    </div>

    <div class="check_buy">
        <div class="titulo">
            <div class="linea"></div>
            <div class="head">Información para recogerlo</div>
            <div class="linea"></div>
        </div>
        <form action="">
            <div>
                <label for="first_name">Nombre</label>
                <input type="text" id = "first_name" class = "input_buy">
            </div>
            
            
            <div>
                <label for="last_name">Apellido</label>
                <input type="text" id = "last_name" class = "input_buy">
            </div>
            
            

            <div>
                <label for="email">Email</label>
                <input type="email"  id = "email" class = "input_buy">
            </div>
                
            <div>
                <label for="cell_number">Celular</label>
                <input type="text"  id = "cell_number" class = "input_buy">
            </div>

            

            <fieldset>
                <legend>Deseo recogerlo entre</legend>
                <!--<label for="range_time">Deseo recogerlo entre</label>-->
                <select name="range_time" id="range_time">
                    <option value="11:30 am - 12:00 m">11:30 am - 12:00 m</option>
                    <option value="12:00 m - 12:15 pm">12:00 m - 12:15 pm</option>
                    <option value="12:15 pm - 12:30 pm">12:15 pm - 12:30 pm</option>
                    <option value="12:30 pm - 1:00pm">12:30 pm - 1:00pm</option>               
                </select>
            </fieldset>

            <fieldset>
                <legend>¿Qué deseas que tengamos en cuenta?</legend>
                <textarea name="commit" id="commit" cols="30" rows="4"></textarea>
            </fieldset>
        </form>
        <button type="submit" id = "listo_button"><img src="../img_proyecto/check_listo.png" alt="" id = "listo_1">Listo!<img src="../img_proyecto/confirm_order.png" alt="" id = "listo_2"></button>

    </div>

    <script>
        
        let arr_pedido = [["S. de gallina", 0],
            ["S. de costilla", 0],

            ["S. de cola", 0],

            ["Sobrebarriga", 0],

            ["Chatas", 0],

            ["Oreada",  0],
        ]

        let total_price;

        window.onpageshow = function () {
            const inpu_car = document.getElementById("value_order");
            inpu_car.value = 0;
            
        }
 
        function order_buy (div_id, img_id, pos_arr_pedido) {
            let table = "<tr><th><b>Cant</b></th><th><b>Plato</b></th><th><b>$/unidad</b></th> <th><b>Valor</b></th><th><b>Cancelar</b></th></tr>";//
            const table_order = document.getElementById("table_order");//
            let q_orders = 0;
            let moneyFormatter  = new Intl.NumberFormat(); 
            const id_input = div_id + '_input'
            const img_check = document.getElementById(img_id);
            const div_proteina = document.querySelector(`#${div_id}`);
            const buy_car = document.getElementById("img_car");
            const value_order = document.getElementById("value_order");
            const but_mi_pedido = document.getElementById("button_mi_pedido");
            but_mi_pedido.style.width = "80px";
            buy_car.style["background-color"] = "rgb(69, 244, 69)";
            value_order.style["background-color"] = "rgb(5, 132, 5)";
            value_order.style.width = "100px";
            but_mi_pedido.style.visibility = "visible";
            const div_quantity= document.createElement("div");
            div_quantity.innerHTML = `<div class = "plus_minus"><button onclick ='minus("${div_id}","${id_input}", "${img_id}", "${pos_arr_pedido}")'>-</button><input type="text" readonly id = ${id_input}>
            <button onclick = 'add("${id_input}", "${pos_arr_pedido}")'>+</button></div>`;
            for (let i = 0; i<div_proteina.children.length; i++) {
                div_proteina.children[i].remove ();
            }
            img_check.remove();
            div_proteina.appendChild(div_quantity);
            const input_element = document.getElementById(`${id_input}`);
            input_element.style["font-weight"] = "bold";
            input_element.value = 1;
            input_element.style["text-align"] = "center";
            input_element.style.width = "30px";
            ///////////////////
            arr_pedido[pos_arr_pedido][1] = 1;

            for (let i = 0; i < arr_pedido.length; i++) {
                q_orders += arr_pedido[i][1];
            }
            total_price = 14000 * q_orders;
            console.log("q_orders", q_orders)

            value_order.value = `$ ${moneyFormatter.format(total_price)} COP`;
            ///
            for (let i=0; i<arr_pedido.length; i++) {
                if (arr_pedido[i][1] > 0) {
                    table += `<tr><td>${arr_pedido[i][1]}</td><td>${arr_pedido[i][0]}</td><td>$14.000</td><td>$${moneyFormatter.format(arr_pedido[i][1]*14000)}</td><td><button onclick =''><b>X</b></button></td></tr>`; //agregué botón cancelar
                }
            }
            table += `<tr><td>----</td><td>----</td><td>----------</td><td>----------</td></tr><tr><td></td><td></td><td><b>VALOR TOTAL</b></td><td>$${moneyFormatter.format(total_price)}</td></tr>`; 
            table_order.innerHTML = table;

        }

        function add(id_input, pos_arr_pedido) {
            let table = "<tr><th><b>Cant</b></th><th><b>Plato</b></th><th><b>$/unidad</b></th> <th><b>Valor</b></th><th><b>Cancelar</b></th></tr>"; //agregué la opcion cancelar
            const table_order = document.getElementById("table_order"); 
            let q_orders = 0; 
            let moneyFormatter  = new Intl.NumberFormat(); 
            const input_quantity = document.getElementById(id_input);
            input_quantity.style["font-weight"] = "bold"; 
            let quant_number = Number(input_quantity.value);
            const value_order = document.getElementById("value_order");
            quant_number++;
            arr_pedido[pos_arr_pedido][1] = quant_number;
            input_quantity.value = `${quant_number}`;
            for (let i = 0; i < arr_pedido.length; i++) {
                q_orders += arr_pedido[i][1];
            }
            total_price = 14000 * q_orders;

            value_order.value = `$ ${moneyFormatter.format(total_price)} COP`;
            //////////////////////
            for (let i=0; i<arr_pedido.length; i++) {
                if (arr_pedido[i][1] > 0) {
                    table += `<tr><td>${arr_pedido[i][1]}</td><td>${arr_pedido[i][0]}</td><td>$14.000</td><td>$${moneyFormatter.format(arr_pedido[i][1]*14000)}</td><td><button onclick =''><b>X</b></button></td></tr>`; //agregué botón
                }
            }
            table += `<tr><td>----</td><td>----</td><td>----------</td><td>----------</td></tr><tr><td></td><td></td><td><b>VALOR TOTAL</b></td><td>$${moneyFormatter.format(total_price)}</td></tr>`
            table_order.innerHTML = table;

        }

        function minus(div_id, id_input, img_id, pos_arr_pedido) {
            let table = "<tr><th><b>Cant</b></th><th><b>Plato</b></th><th><b>$/unidad</b></th> <th><b>Valor</b></th><th><b>Cancelar</b></th></tr>";
            const table_order = document.getElementById("table_order");
            const review_order = document.querySelector(".lista_pedido");
            let q_orders = 0;
            let moneyFormatter  = new Intl.NumberFormat();
            const buy_car = document.getElementById("img_car");
            const but_mi_pedido = document.getElementById("button_mi_pedido");
            const value_order = document.getElementById("value_order");
            const div_proteina = document.querySelector(`#${div_id}`)
            const input_quantity = document.getElementById(id_input);
            input_quantity.style["font-weight"] = "bold";
            let quant_number = Number(input_quantity.value);
            quant_number--;
            if (quant_number == 0) {
                for (let i = 0; i<div_proteina.children.length; i++) {
                    div_proteina.children[i].remove ();
                }
                const div_i_want = document.createElement("div");
                div_i_want.innerHTML = `<button class = "i_want" id = "but_oreada" onclick="order_buy('${div_id}', '${img_id}', ${pos_arr_pedido})">Yo quiero!</button>
                <img src="../img_proyecto/check_order.png" alt="" id = "${img_id}">`;
                div_proteina.appendChild(div_i_want);

                
            } else {
                input_quantity.value = `${quant_number}`
            };
            arr_pedido[Number(pos_arr_pedido)][1] = quant_number;
            for (let i = 0; i < arr_pedido.length; i++) {
                q_orders += arr_pedido[i][1];
            }
            if (q_orders == 0) {
                buy_car.style["background-color"] = "white";
                but_mi_pedido.style.visibility = "hidden";
                but_mi_pedido.style.width = "30px";
                value_order.style["background-color"] = "black";
                value_order.style.width = "30px";
                value_order.value = 0;
                review_order.style.visibility = "collapse";
            } else {
                total_price = 14000 * q_orders;
                value_order.value = `$ ${moneyFormatter.format(total_price)} COP`; 
            }

            for (let i=0; i<arr_pedido.length; i++) {
                if (arr_pedido[i][1] > 0) {
                    table += `<tr><td>${arr_pedido[i][1]}</td><td>${arr_pedido[i][0]}</td><td>$14.000</td><td>$${moneyFormatter.format(arr_pedido[i][1]*14000)}</td><td><button onclick =''><b>X</b></button></td></tr>`
                }
            }
            table += `<tr><td>----</td><td>----</td><td>----------</td><td>----------</td></tr><tr><td></td><td></td><td><b>VALOR TOTAL</b></td><td>$${moneyFormatter.format(total_price)}</td></tr>`
            table_order.innerHTML = table;
             
        }

        function dropdown_order () {
            let table = "<tr><th><b>Cant</b></th><th><b>Plato</b></th><th><b>$/unidad</b></th> <th><b>Valor</b></th><th><b>Cancelar</b></th></tr>";
            let moneyFormatter  = new Intl.NumberFormat();
            const review_order = document.querySelector(".lista_pedido");
            const table_order = document.getElementById("table_order");
            for (let i=0; i<arr_pedido.length; i++) {
                if (arr_pedido[i][1] > 0) {
                    table += `<tr><td>${arr_pedido[i][1]}</td><td>${arr_pedido[i][0]}</td><td>$14.000</td><td>$${moneyFormatter.format(arr_pedido[i][1]*14000)}</td><td><button onclick =''><b>X</b></button></td></tr>`
                }
            }
            table += `<tr><td>----</td><td>----</td><td>----------</td><td>----------</td></tr><tr><td></td><td></td><td><b>VALOR TOTAL</b></td><td>$${moneyFormatter.format(total_price)}</td></tr>`;
            table_order.innerHTML = table;
            review_order.style.visibility = "visible";
        }

        function collapse_order() {
            const review_order = document.querySelector(".lista_pedido")
            review_order.style.visibility = "collapse";
        }

        function confirm_order() {
            const i_want = document.getElementsByClassName("button_i_want");
            const button_confirm = document.getElementsByClassName("check_buy");
            const review_order = document.querySelector(".lista_pedido");
            for (let div of i_want) {
                div.style.visibility = "hidden";
            }
            button_confirm[0].style.visibility = "visible";
            review_order.style.visibility = "hidden";
            console.log(button_confirm[0])
        }
 
 
     </script>
    
</body>
</html>